!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs/Subject"),require("rxjs/operators"),require("lodash"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-tbl",["exports","@angular/core","rxjs/Subject","rxjs/operators","lodash","@angular/forms","@angular/common"],e):e(t["ngx-tbl"]={},t.ng.core,t.rxjs.Subject,t.rxjs.operators,t._,t.ng.forms,t.ng.common)}(this,function(t,n,r,o,g,i,e){"use strict";var a=function(){function t(){}return t.decorators=[{type:n.Directive,args:[{selector:"ngx-tbl-column"}]}],t.propDecorators={name:[{type:n.Input}],key:[{type:n.Input}],sortable:[{type:n.Input}],narrow:[{type:n.Input}],cellTemplate:[{type:n.ContentChild,args:["ngxTblCellTemplate"]}]},t}(),s=function(){function t(){var e=this;this.limit=10,this.sort={},this.subject=new r.Subject,this.debouncer=new r.Subject,this.update=new n.EventEmitter,this.load=new n.EventEmitter,this.edit=new n.EventEmitter,this.add=new n.EventEmitter,this["delete"]=new n.EventEmitter,this.resetPagination=this.subject.asObservable(),this.debouncer.pipe(o.debounceTime(300),o.map(function(t){return e.loadData()}))}return Object.defineProperty(t.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.loadData()},t.prototype.ngAfterViewInit=function(){this.subject.next(!0)},t.prototype.search=function(){this.subject.next(!0),this.debouncer.next()},t.prototype.limitChange=function(){this.subject.next(!0),this.loadData()},t.prototype.confirmDelete=function(t){this.deleteRow=t,this.deleteConfirmModal.show()},t.prototype.deleteItem=function(){this["delete"].emit({item:g.clone(this.deleteRow),tableParams:this.getQueryParams(1)}),this.deleteRow={},this.deleteConfirmModal.hide(),this.subject.next(!0)},t.prototype.closeModal=function(){this.deleteConfirmModal.hide()},t.prototype.editRow=function(t,e){this.edit.emit({item:g.clone(t),tableParams:this.getQueryParams(1)}),this.subject.next(!0)},t.prototype.addNew=function(){this.add.emit({tableParams:this.getQueryParams(1)}),this.subject.next(!0)},t.prototype.getQueryParams=function(t){return{search:this.searchParam||"",limit:this.limit,skip:(t-1)*this.limit,sort:this.sort}},t.prototype.loadData=function(t){void 0===t&&(t=1),this.load.emit(this.getQueryParams(t))},t.prototype.sortColumn=function(t){t.sortable&&(0==g.get(this.sort,t.key)?(this.sort={},this.sort[t.key]=1):1==g.get(this.sort,t.key)?(this.sort={},this.sort[t.key]=0):(this.sort={},this.sort[t.key]=1),this.loadData())},t.decorators=[{type:n.Component,args:[{selector:"ngx-tbl",templateUrl:"./ngx-tbl-component.html"}]}],t.ctorParameters=function(){return[]},t.propDecorators={deleteConfirmModal:[{type:n.ViewChild,args:["deleteConfirmModal"]}],items:[{type:n.Input}],config:[{type:n.Input}],update:[{type:n.Output}],load:[{type:n.Output}],edit:[{type:n.Output}],add:[{type:n.Output}],"delete":[{type:n.Output}],columns:[{type:n.ContentChildren,args:[a]}]},t}(),l=function(){function t(t,e,n,r,o){this.container=t,this.name=e,this.renderer=r,this.el=o,this.form=this.container.form,this.form.removeControl(this.name),this.form.get(this.name)||this.form.addControl(this.name,new i.FormControl(""))}return t.decorators=[{type:n.Directive,args:[{selector:"[formControlName][ngx-tbl-control]"}]}],t.ctorParameters=function(){return[{type:i.ControlContainer},{type:undefined,decorators:[{type:n.Attribute,args:["formControlName"]}]},{type:undefined,decorators:[{type:n.Attribute,args:["validation"]}]},{type:n.Renderer2},{type:n.ElementRef}]},t.propDecorators={validators:[{type:n.Input,args:["validators"]}]},t}(),p=function(){function t(){this.pageChanged=new n.EventEmitter,this.reset=!0,this.pager={}}return t.prototype.setPage=function(t){t<1||t>this.pager.totalPages||(this.pageChanged.emit(t),this.pager=this.getPager(this.total,t,g.toNumber(this.limit)))},t.prototype.ngOnInit=function(){var t=this;this.resetPagination.subscribe(function(){t.reset=!0})},t.prototype.ngOnChanges=function(t){this.limit=parseInt(this.limit),0<=this.total&&this.reset&&(this.reset=!1,this.pager=this.getPager(this.total,1,g.toNumber(this.limit)))},t.prototype.getPager=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=10);var r,o,i=Math.ceil(t/n);i<=10?(r=1,o=i):e<=6?(r=1,o=10):i<=e+4?(r=i-9,o=i):(r=e-5,o=e+4);var a=(e-1)*n,s=Math.min(a+n-1,t-1),l=g.range(r,o+1),p=a+this.limit;return p>this.total&&(p=this.total),{totalItems:t,currentPage:e,pageSize:n,totalPages:i,startPage:r,endPage:o,startIndex:a,endIndex:s,pages:l,endCount:p}},t.decorators=[{type:n.Component,args:[{selector:"ngx-tbl-pagination",changeDetection:n.ChangeDetectionStrategy.OnPush,styles:["\n    .pagination { float: right; margin:0 0 7px 0; }\n    .pagination li{cursor:pointer;}\n    .paging-info {font-style: italic;color: #808080;line-height: 2;}\n  "],template:'\n  <div class="col-md-3 col-xs-3 col-lg-3 col-sm-3 paging-info" *ngIf="total">\n    <span>showing {{this.pager.startIndex+1}} to {{this.pager.endCount}} of {{total}}</span>\n  </div>\n  <div class="col-md-9 col-xs-9 col-lg-9 col-sm-9">\n  <ul *ngIf="pager.pages && pager.pages.length" class="pagination">\n    <li [ngClass]="{disabled:pager.currentPage === 1}">\n        <a (click)="setPage(1)">First</a>\n    </li>\n    <li [ngClass]="{disabled:pager.currentPage === 1}">\n        <a (click)="setPage(pager.currentPage - 1)">Prev</a>\n    </li>\n    <li *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}">\n        <a (click)="setPage(page)">{{page}}</a>\n    </li>\n    <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}">\n        <a (click)="setPage(pager.currentPage + 1)">Next</a>\n    </li>\n    <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}">\n        <a (click)="setPage(pager.totalPages)">Last</a>\n    </li>\n  </ul>\n  </div>\n  '}]}],t.ctorParameters=function(){return[]},t.propDecorators={resetPagination:[{type:n.Input,args:["reset-pagination"]}],total:[{type:n.Input,args:["total"]}],limit:[{type:n.Input}],pageChanged:[{type:n.Output,args:["page-change"]}]},t}(),u=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule],declarations:[s,a,l,p],exports:[s,a,l]}]}],t}();t.NgxTblModule=u,t.NgxTblComponent=s,t.NgxTblControl=l,t.NgxTblColumn=a,t.NgxTblPagination=p,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-tbl.umd.min.js.map